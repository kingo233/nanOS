# 开发日志

## 2021.3.2

今天开始打算写nanOS的开发日志

但是很可惜nanOS已经开发了一段时间，那么我简要地概述一下到目前为止的工作

完成了操作系统的bootloader部分，在此期间学习了uCore的bootloader

本着如果只是照着抄，那么学习的价值就很小的原则

我试着改动了boot/bootasm.S的代码顺序，把gdt部分提到了代码的最前面，最后编译

调试的时候，尝试了很久才发现0x7c00这个部分已经不是start了，而是gdt

在还原了代码顺序之后，才回到了正常。

由于原项目的Makefile写得很复杂（对于我一个新手来说），所以我决定自己照虎画猫

自己写一个简易版的Makefile，在项目的版本迭代中体会原项目Makefile的好处

以及原理,事实证明，我这样做还是学到了一些东西的。

比如在用sign工具生成规范引导扇区的时候，出现了它的大小大于510个字节的错误

才发现我自己的bootmain.c把宏替换成了const常量，就占据了很大的大小。

可见系统级别的编程时，宏还是很厉害的魔法。

这样做还不够，它还是大于510个字节，我花了一个下午研究才发现是gcc的编译优化

选项问题，应该选择 -Os

接下来的工作是学习uCore中的Makefile，然后改良我自己的，因为bootloader已经

写完了，内核部分的代码文件会非常多，目前的Makefile已经不适合了。
